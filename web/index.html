<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TORM - Goè¯­è¨€çš„ä¼˜é›…ORMåº“</title>
    <link rel="icon" href="assets/logo.svg" type="image/x-icon">
    <link rel="stylesheet" href="styles/main.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- å¯¼èˆªæ  -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <img src="assets/logo.svg" alt="TORM" class="logo">
                <span class="brand-text">TORM</span>
            </div>
            <div class="nav-menu" id="nav-menu">
                <a href="docs.html" class="nav-link">æ–‡æ¡£</a>
                <a href="docs.html?doc=examples" class="nav-link">ç¤ºä¾‹</a>
                <a href="#" class="nav-link">ç¤¾åŒº</a>
                <a href="#" class="nav-link">API</a>
                <a href="docs.html?doc=contributing" class="nav-link">è´¡çŒ®</a>
                <div class="language-selector">
                    <select id="language-select">
                        <option value="zh">ç®€ä½“ä¸­æ–‡</option>
                        <option value="en">English</option>
                    </select>
                </div>
            </div>
            <div class="nav-toggle" id="nav-toggle">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <!-- ä¸»é¡µå†…å®¹ -->
    <main class="main-content">
        <!-- è‹±é›„åŒºåŸŸ -->
        <section class="hero">
            <div class="hero-background"></div>
            <div class="container">
                <div class="hero-content">
                    <h1 class="hero-title">
                        <span class="hero-title-main">TORM</span>
                        <span class="hero-title-sub">Goè¯­è¨€çš„ä¼˜é›…ORMåº“</span>
                    </h1>
                    <div class="hero-install">
                        <code class="install-command">go get -u github.com/zhoudm1743/torm</code>
                        <button class="copy-btn" id="copy-install-btn">å¤åˆ¶</button>
                    </div>
                    <div class="hero-stats">
                        <div class="stat-item">
                            <span class="stat-icon">â­</span>
                            <span class="stat-text">GitHub stars</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-icon">ğŸ´</span>
                            <span class="stat-text">GitHub forks</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-icon">ğŸ‘¥</span>
                            <span class="stat-text">è´¡çŒ®è€…</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ç‰¹æ€§å±•ç¤º -->
        <section class="features">
            <div class="container">
                <h2 class="section-title">ä¸ºä»€ä¹ˆé€‰æ‹©TORMï¼Ÿ</h2>
                <div class="features-grid">
                    <div class="feature-card">
                        <div class="feature-icon">ğŸš€</div>
                        <h3>é«˜æ€§èƒ½</h3>
                        <p>ä¼˜åŒ–çš„æŸ¥è¯¢æ„å»ºå™¨å’Œè¿æ¥æ± ç®¡ç†ï¼Œä¸ºæ‚¨çš„åº”ç”¨æä¾›æè‡´æ€§èƒ½</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">ğŸ”—</div>
                        <h3>å…³è”å…³ç³»</h3>
                        <p>å®Œæ•´æ”¯æŒ has oneã€has manyã€belongs toã€many to many ç­‰å…³è”å…³ç³»</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">ğŸª</div>
                        <h3>é’©å­å‡½æ•°</h3>
                        <p>æ”¯æŒ before/after create/save/update/delete/find ç­‰ç”Ÿå‘½å‘¨æœŸé’©å­</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">ğŸ“Š</div>
                        <h3>æ•°æ®è¿ç§»</h3>
                        <p>å†…ç½®å¼ºå¤§çš„æ•°æ®åº“è¿ç§»å·¥å…·ï¼Œè½»æ¾ç®¡ç†æ•°æ®åº“ç‰ˆæœ¬</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">ğŸ’¾</div>
                        <h3>å¤šæ•°æ®åº“æ”¯æŒ</h3>
                        <p>æ”¯æŒ MySQLã€PostgreSQLã€SQLiteã€MongoDB ç­‰å¤šç§æ•°æ®åº“</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">ğŸ”’</div>
                        <h3>äº‹åŠ¡å¤„ç†</h3>
                        <p>å®Œæ•´çš„äº‹åŠ¡æ”¯æŒï¼ŒåŒ…æ‹¬åµŒå¥—äº‹åŠ¡ã€ä¿å­˜ç‚¹ç­‰é«˜çº§åŠŸèƒ½</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">ğŸ¯</div>
                        <h3>æŸ¥è¯¢æ„å»ºå™¨</h3>
                        <p>å¼ºå¤§çš„ SQL æŸ¥è¯¢æ„å»ºå™¨ï¼Œæ”¯æŒå¤æ‚æŸ¥è¯¢å’Œå­æŸ¥è¯¢</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">ğŸ§°</div>
                        <h3>å¼€å‘å‹å¥½</h3>
                        <p>è¯¦ç»†çš„æ–‡æ¡£ã€ä¸°å¯Œçš„ç¤ºä¾‹ï¼Œè®©å¼€å‘æ›´åŠ è½»æ¾æ„‰å¿«</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- ä»£ç ç¤ºä¾‹ -->
        <section class="code-demo">
            <div class="container">
                <h2 class="section-title">å¿«é€Ÿä¸Šæ‰‹</h2>
                <div class="demo-tabs">
                    <button class="tab-btn active" data-tab="basic">åŸºç¡€æ“ä½œ</button>
                    <button class="tab-btn" data-tab="migration">æ•°æ®è¿ç§»</button>
                    <button class="tab-btn" data-tab="transaction">äº‹åŠ¡å¤„ç†</button>
                </div>
                <div class="demo-content">
                    <div class="tab-content active" id="basic">
                        <pre><code class="language-go">package main

import (
    "context"
    "fmt"
    "log"
    "torm/pkg/db"
    "torm/pkg/model"
)

func main() {
    // é…ç½®æ•°æ®åº“ï¼ˆSQLiteæœ€ç®€å•ï¼‰
    config := &db.Config{
        Driver:   "sqlite",
        Database: "example.db",
    }
    
    err := db.AddConnection("default", config)
    if err != nil {
        log.Fatal(err)
    }
    
    ctx := context.Background()
    
    // åˆ›å»ºç”¨æˆ·
    user := model.NewUser()
    user.SetName("å¼ ä¸‰").SetEmail("zhangsan@example.com").SetAge(25)
    user.Save(ctx)
    fmt.Printf("âœ… ç”¨æˆ·åˆ›å»ºæˆåŠŸ! ID: %v\n", user.GetID())
    
    // æŸ¥æ‰¾ç”¨æˆ·
    foundUser := model.NewUser()
    foundUser.Find(ctx, user.GetID())
    fmt.Printf("æ‰¾åˆ°ç”¨æˆ·: %s (%s)\n", foundUser.GetName(), foundUser.GetEmail())
    
    // æ›´æ–°ç”¨æˆ·
    foundUser.SetAge(26)
    foundUser.Save(ctx)
    fmt.Println("âœ… ç”¨æˆ·æ›´æ–°æˆåŠŸ!")
    
    // åˆ é™¤ç”¨æˆ·
    foundUser.Delete(ctx)
    fmt.Println("âœ… ç”¨æˆ·åˆ é™¤æˆåŠŸ!")
}</code></pre>
                    </div>
                    <div class="tab-content" id="migration">
                        <pre><code class="language-go">package main

import (
    "context"
    "fmt"
    "torm/pkg/db"
    "torm/pkg/migration"
)

func main() {
    // è·å–æ•°æ®åº“è¿æ¥
    conn, _ := db.DB("default")
    migrator := migration.NewMigrator(conn, nil)
    
    // æ³¨å†Œè¿ç§» - åˆ›å»ºç”¨æˆ·è¡¨
    migrator.RegisterFunc(
        "20240101_000001",
        "åˆ›å»ºç”¨æˆ·è¡¨",
        func(ctx context.Context, conn db.ConnectionInterface) error {
            schema := migration.NewSchemaBuilder(conn)
            
            table := &migration.Table{
                Name: "users",
                Columns: []*migration.Column{
                    {Name: "id", Type: migration.ColumnTypeBigInt, PrimaryKey: true, AutoIncrement: true},
                    {Name: "name", Type: migration.ColumnTypeVarchar, Length: 100, NotNull: true},
                    {Name: "email", Type: migration.ColumnTypeVarchar, Length: 100, NotNull: true},
                    {Name: "age", Type: migration.ColumnTypeInt, NotNull: true},
                    {Name: "created_at", Type: migration.ColumnTypeDateTime, Default: "CURRENT_TIMESTAMP"},
                },
                Indexes: []*migration.Index{
                    {Name: "idx_users_email", Columns: []string{"email"}, Unique: true},
                },
            }
            
            return schema.CreateTable(ctx, table)
        },
        func(ctx context.Context, conn db.ConnectionInterface) error {
            schema := migration.NewSchemaBuilder(conn)
            return schema.DropTable(ctx, "users")
        },
    )
    
    // æ‰§è¡Œè¿ç§»
    ctx := context.Background()
    err := migrator.Up(ctx)
    if err != nil {
        fmt.Printf("è¿ç§»å¤±è´¥: %v\n", err)
        return
    }
    fmt.Println("âœ… æ•°æ®åº“è¿ç§»å®Œæˆ!")
}</code></pre>
                    </div>
                    <div class="tab-content" id="transaction">
                        <pre><code class="language-go">package main

import (
    "context"
    "fmt"
    "torm/pkg/db"
    "torm/pkg/model"
)

// è½¬è´¦ç¤ºä¾‹ - æ¼”ç¤ºäº‹åŠ¡å¤„ç†
func transferMoney(ctx context.Context, fromUserID, toUserID int64, amount float64) error {
    conn, _ := db.DB("default")
    
    // å¼€å§‹äº‹åŠ¡
    tx, err := conn.Begin(ctx)
    if err != nil {
        return err
    }
    defer tx.Rollback() // ç¡®ä¿åœ¨å‡ºé”™æ—¶å›æ»š
    
    // æ‰£é™¤å‘é€æ–¹ä½™é¢
    _, err = tx.Exec(ctx, 
        "UPDATE accounts SET balance = balance - ? WHERE user_id = ?", 
        amount, fromUserID)
    if err != nil {
        return fmt.Errorf("æ‰£é™¤ä½™é¢å¤±è´¥: %v", err)
    }
    
    // å¢åŠ æ¥æ”¶æ–¹ä½™é¢
    _, err = tx.Exec(ctx, 
        "UPDATE accounts SET balance = balance + ? WHERE user_id = ?", 
        amount, toUserID)
    if err != nil {
        return fmt.Errorf("å¢åŠ ä½™é¢å¤±è´¥: %v", err)
    }
    
    // è®°å½•è½¬è´¦æ—¥å¿—
    _, err = tx.Exec(ctx,
        "INSERT INTO transfer_logs (from_user_id, to_user_id, amount, created_at) VALUES (?, ?, ?, NOW())",
        fromUserID, toUserID, amount)
    if err != nil {
        return fmt.Errorf("è®°å½•æ—¥å¿—å¤±è´¥: %v", err)
    }
    
    // æäº¤äº‹åŠ¡
    return tx.Commit()
}

func main() {
    ctx := context.Background()
    
    // æ‰§è¡Œè½¬è´¦
    err := transferMoney(ctx, 1, 2, 100.00)
    if err != nil {
        fmt.Printf("è½¬è´¦å¤±è´¥: %v\n", err)
    } else {
        fmt.Println("âœ… è½¬è´¦æˆåŠŸ!")
    }
}</code></pre>
                    </div>
                </div>
            </div>
        </section>

        <!-- èµåŠ©å•†åŒºåŸŸ -->
        <section class="sponsors">
            <div class="container">
                <h2 class="section-title">æ„Ÿè°¢æˆ‘ä»¬çš„èµåŠ©å•†</h2>
                <div class="sponsor-tiers">
                    <div class="sponsor-tier">
                        <h3>ç™½é‡‘èµåŠ©å•†</h3>
                        <div class="sponsor-cards">
                            <div class="sponsor-card placeholder">
                                <span>æˆä¸ºèµåŠ©å•†</span>
                            </div>
                        </div>
                    </div>
                    <div class="sponsor-tier">
                        <h3>é»„é‡‘èµåŠ©å•†</h3>
                        <div class="sponsor-cards">
                            <div class="sponsor-card placeholder">
                                <span>æˆä¸ºèµåŠ©å•†</span>
                            </div>
                            <div class="sponsor-card placeholder">
                                <span>æˆä¸ºèµåŠ©å•†</span>
                            </div>
                            <div class="sponsor-card placeholder">
                                <span>æˆä¸ºèµåŠ©å•†</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- é¡µè„š -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>TORM</h4>
                    <p>Goè¯­è¨€çš„ä¼˜é›…ORMåº“</p>
                </div>
                <div class="footer-section">
                    <h4>æ–‡æ¡£</h4>
                    <a href="docs.html?doc=quick-start">å¿«é€Ÿå¼€å§‹</a>
                    <a href="docs.html?doc=configuration">é…ç½®æŒ‡å—</a>
                    <a href="#">APIå‚è€ƒ</a>
                </div>
                <div class="footer-section">
                    <h4>ç¤¾åŒº</h4>
                    <a href="https://github.com/zhoudm1743/torm" target="_blank">GitHub</a>
                    <a href="#">è®¨è®ºåŒº</a>
                    <a href="docs.html?doc=contributing">è´¡çŒ®æŒ‡å—</a>
                </div>
                <div class="footer-section">
                    <h4>å…¶ä»–</h4>
                    <a href="docs.html?doc=changelog">æ›´æ–°æ—¥å¿—</a>
                    <a href="https://github.com/zhoudm1743/torm/issues" target="_blank">é—®é¢˜åé¦ˆ</a>
                    <a href="docs.html?doc=troubleshooting">æ•…éšœæ’é™¤</a>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 TORM. </p>
            </div>
        </div>
    </footer>

    <script src="scripts/config.js"></script>
    <script src="scripts/main.js"></script>
</body>
</html> 