<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TORM - Go语言的优雅ORM库</title>
    <link rel="icon" href="assets/logo.svg" type="image/x-icon">
    <link rel="stylesheet" href="styles/main.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- 导航栏 -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <img src="assets/logo.svg" alt="TORM" class="logo">
                <span class="brand-text">TORM</span>
            </div>
            <div class="nav-menu" id="nav-menu">
                <a href="docs.html" class="nav-link">文档</a>
                <a href="docs.html?doc=examples" class="nav-link">示例</a>
                <a href="#" class="nav-link">社区</a>
                <a href="#" class="nav-link">API</a>
                <a href="docs.html?doc=contributing" class="nav-link">贡献</a>
                <div class="language-selector">
                    <select id="language-select">
                        <option value="zh">简体中文</option>
                        <option value="en">English</option>
                    </select>
                </div>
            </div>
            <div class="nav-toggle" id="nav-toggle">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <!-- 主页内容 -->
    <main class="main-content">
        <!-- 英雄区域 -->
        <section class="hero">
            <div class="hero-background"></div>
            <div class="container">
                <div class="hero-content">
                    <h1 class="hero-title">
                        <span class="hero-title-main">TORM</span>
                        <span class="hero-title-sub">Go语言的优雅ORM库</span>
                    </h1>
                    <div class="hero-install">
                        <code class="install-command">go get -u github.com/zhoudm1743/torm</code>
                        <button class="copy-btn" id="copy-install-btn">复制</button>
                    </div>
                    <div class="hero-stats">
                        <div class="stat-item">
                            <span class="stat-icon">⭐</span>
                            <span class="stat-text">GitHub stars</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-icon">🍴</span>
                            <span class="stat-text">GitHub forks</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-icon">👥</span>
                            <span class="stat-text">贡献者</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 特性展示 -->
        <section class="features">
            <div class="container">
                <h2 class="section-title">为什么选择TORM</h2>
                <div class="features-grid">
                    <div class="feature-card">
                        <div class="feature-icon">⚡</div>
                        <h3>零配置启动</h3>
                        <p>一行代码完成数据库连接和表创建，无需复杂配置</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">🏷️</div>
                        <h3>丰富TORM标签</h3>
                        <p>30+种标签覆盖所有数据库特性，精确控制表结构</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">🔄</div>
                        <h3>智能自动迁移</h3>
                        <p>自动检测模型变更，安全更新表结构，保护现有数据</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">🌐</div>
                        <h3>跨数据库兼容</h3>
                        <p>MySQL、PostgreSQL、SQLite无缝切换，一套代码多环境</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">🔗</div>
                        <h3>强大查询构建器</h3>
                        <p>参数化查询、数组参数、自动占位符适配</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">💼</div>
                        <h3>自动事务管理</h3>
                        <p>简洁的事务API，自动提交回滚，确保数据一致性</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">🚀</div>
                        <h3>高性能优化</h3>
                        <p>零反射查询、连接池优化、批量操作原生支持</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">🎯</div>
                        <h3>生产就绪</h3>
                        <p>完整测试覆盖、详细文档、丰富示例</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- 代码示例 -->
        <section class="code-demo">
            <div class="container">
                <h2 class="section-title">快速上手</h2>
                <div class="demo-tabs">
                    <button class="tab-btn active" data-tab="basic">快速启动</button>
                    <button class="tab-btn" data-tab="model">TORM标签</button>
                    <button class="tab-btn" data-tab="migration">自动迁移</button>
                    <button class="tab-btn" data-tab="transaction">查询操作</button>
                </div>
                <div class="demo-content">
                    <div class="tab-content active" id="basic">
                        <pre><code class="language-go">package main

import (
    "time"
    "github.com/zhoudm1743/torm"
)

// 用户模型 
type User struct {
    torm.BaseModel
    ID        int       `json:"id" torm:"primary_key,auto_increment"`
    Username  string    `json:"username" torm:"type:varchar,size:50,unique"`
    Email     string    `json:"email" torm:"type:varchar,size:100,unique"`
    Age       int       `json:"age" torm:"type:int,default:0"`
    Status    string    `json:"status" torm:"type:varchar,size:20,default:active"`
    CreatedAt time.Time `json:"created_at" torm:"auto_create_time"`
    UpdatedAt time.Time `json:"updated_at" torm:"auto_update_time"`
}

func main() {
    // 🚀 TORM 

    // 第1步：配置数据库（支持MySQL、PostgreSQL、SQLite）
    torm.AddConnection("default", &torm.Config{
        Driver:   "mysql",
        Host:     "localhost",
        Port:     3306,
        Database: "myapp",
        Username: "root",
        Password: "password",
    })

    // 第2步：创建表结构
    user := &User{}
    user.AutoMigrate() 
    
    // 第3步：开始使用
    // 创建用户
    newUser := &User{
        Username: "zhangsan",
        Email:    "zhangsan@example.com",
        Age:      25,
        Status:   "active",
    }
    newUser.Save()
    
    // 查询用户
    users, _ := torm.Table("users").
        Where("status", "=", "active").
        Where("age", ">=", 18).
        Get()
    
    // 完成！无需复杂配置，立即可用
    fmt.Printf("创建了 %d 个用户", len(users))
}</code></pre>
                    </div>
                    <div class="tab-content" id="model">
                        <pre><code class="language-go">// 🏷️ TORM标签系统 - 30+种标签精确控制表结构

type Product struct {
    torm.BaseModel
    
    // 主键和自增
    ID int64 `torm:"primary_key,auto_increment,comment:产品ID"`
    
    // 字符串类型和长度控制
    Name     string `torm:"type:varchar,size:200,comment:产品名称"`
    SKU      string `torm:"type:varchar,size:50,unique,comment:产品编码"`
    Category string `torm:"type:varchar,size:20,default:normal,index"`
    
    // 数值类型和精度控制
    Price  float64 `torm:"type:decimal,precision:10,scale:2,comment:价格"`
    Stock  int     `torm:"type:int,unsigned,default:0,comment:库存"`
    Weight float64 `torm:"type:decimal,precision:8,scale:3,comment:重量"`
    
    // 布尔和默认值
    IsActive bool `torm:"type:boolean,default:1,comment:是否启用"`
    IsNew    bool `torm:"type:boolean,default:0,comment:是否新品"`
    
    // 文本类型
    Description string `torm:"type:text,comment:产品描述"`
    Features    string `torm:"type:longtext,comment:产品特性"`
    
    // 二进制和JSON类型
    Image    []byte                 `torm:"type:blob,comment:产品图片"`
    Settings map[string]interface{} `torm:"type:json,comment:设置信息"`
    Tags     []string               `torm:"type:json,comment:标签列表"`
    
    // 索引类型
    SearchKey string `torm:"type:varchar,size:200,fulltext,comment:搜索关键词"`
    Location  string `torm:"type:varchar,size:100,spatial,comment:地理位置"`
    
    // 外键和关联
    CategoryID int `torm:"type:int,references:categories.id,on_delete:cascade"`
    BrandID    int `torm:"type:int,references:brands.id,on_delete:set_null"`
    
    // 自动时间戳
    CreatedAt time.Time `torm:"auto_create_time,comment:创建时间"`
    UpdatedAt time.Time `torm:"auto_update_time,comment:更新时间"`
}

// 一行代码创建复杂表结构
func main() {
    // 自动创建表、索引、外键、约束
    product := &Product{}
    product.AutoMigrate()
    
    // 生成的MySQL DDL示例：
    // CREATE TABLE products (
    //   id BIGINT AUTO_INCREMENT PRIMARY KEY COMMENT '产品ID',
    //   name VARCHAR(200) COMMENT '产品名称',
    //   sku VARCHAR(50) UNIQUE COMMENT '产品编码',
    //   price DECIMAL(10,2) COMMENT '价格',
    //   stock INT UNSIGNED DEFAULT 0 COMMENT '库存',
    //   is_active BOOLEAN DEFAULT 1 COMMENT '是否启用',
    //   settings JSON COMMENT '设置信息',
    //   created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    //   ...
    //   INDEX idx_category (category),
    //   FULLTEXT idx_search_key (search_key),
    //   FOREIGN KEY (category_id) REFERENCES categories(id) ON DELETE CASCADE
    // );
}</code></pre>
                    </div>
                    <div class="tab-content" id="migration">
                        <pre><code class="language-go">// 自动迁移

// 第一次运行：创建基础表结构
type User struct {
    torm.BaseModel
    ID   int    `torm:"primary_key,auto_increment"`
    Name string `torm:"type:varchar,size:50"`
}

func firstDeploy() {
    user := &User{}
    user.AutoMigrate()
    // SQL: CREATE TABLE users (id INT AUTO_INCREMENT PRIMARY KEY, name VARCHAR(50))
}

// 第二次运行：添加新字段
type User struct {
    torm.BaseModel
    ID    int    `torm:"primary_key,auto_increment"`
    Name  string `torm:"type:varchar,size:50"`
    Email string `torm:"type:varchar,size:100,unique"` // 新增字段
    Age   int    `torm:"type:int,default:0"`           // 新增字段
}

func secondDeploy() {
    user := &User{}
    user.AutoMigrate()
    // 智能检测差异，只执行必要的变更：
    // SQL: ALTER TABLE users ADD COLUMN email VARCHAR(100) UNIQUE
    // SQL: ALTER TABLE users ADD COLUMN age INT DEFAULT 0
}

// 第三次运行：修改字段属性
type User struct {
    torm.BaseModel
    ID    int    `torm:"primary_key,auto_increment"`
    Name  string `torm:"type:varchar,size:100"`        // 长度从50改为100
    Email string `torm:"type:varchar,size:100,unique"`
    Age   int    `torm:"type:int,default:0"`
}

func thirdDeploy() {
    user := &User{}
    user.AutoMigrate()
    // 智能检测字段变更：
    // SQL: ALTER TABLE users MODIFY COLUMN name VARCHAR(100)
}

// 跨数据库自动适配
func crossDatabase() {
    // 同一模型定义，自动适配不同数据库
    user := &User{}
    
    // MySQL环境
    user.SetConnection("mysql")
    user.AutoMigrate() // 生成MySQL优化的DDL
    
    // PostgreSQL环境  
    user.SetConnection("postgres")
    user.AutoMigrate() // 生成PostgreSQL优化的DDL
    
    // SQLite环境
    user.SetConnection("sqlite")  
    user.AutoMigrate() // 生成SQLite兼容的DDL
}</code></pre>
                    </div>
                    <div class="tab-content" id="transaction">
                        <pre><code class="language-go">// 🔗 查询构建器

func main() {
    // 基础查询 - 链式调用
    users, _ := torm.Table("users").
        Where("status", "=", "active").
        Where("age", ">=", 18).
        OrderBy("created_at", "desc").
        Limit(10).
        Get()

    // 参数化查询 
    user, _ := torm.Table("users").
        Where("username = ? AND age >= ?", "zhangsan", 25).
        First()

    // 数组参数支持
    activeUsers, _ := torm.Table("users").
        Where("status IN (?)", []string{"active", "premium", "vip"}).
        Where("age BETWEEN ? AND ?", 18, 65).
        Get()

    // 复杂条件组合
    complexResults, _ := torm.Table("users").
        Where("(status = ? OR vip_level > ?) AND age >= ?", "premium", 3, 25).
        WhereIn("department", []string{"tech", "product", "design"}).
        Get()

    // 聚合和分页
    count, _ := torm.Table("users").Where("status", "=", "active").Count()
    
    pagination, _ := torm.Table("users").
        Where("status", "=", "active").
        Paginate(1, 20) // 第1页，每页20条

    // 事务处理 - 自动管理
    err := torm.Transaction(func(tx torm.TransactionInterface) error {
        // 在事务中执行多个操作
        _, err := tx.Exec("INSERT INTO orders (user_id, amount) VALUES (?, ?)", 
                         123, 99.99)
        if err != nil {
            return err // 自动回滚
        }
        
        _, err = tx.Exec("UPDATE users SET balance = balance - ? WHERE id = ?", 
                        99.99, 123)
        if err != nil {
            return err // 自动回滚
        }

        return nil // 自动提交
    })

    // 跨数据库占位符自动适配
    // MySQL: SELECT * FROM users WHERE status = ? AND age >= ?
    // PostgreSQL: SELECT * FROM users WHERE status = $1 AND age >= $2
    // SQLite: SELECT * FROM users WHERE status = ? AND age >= ?
}</code></pre>
                    </div>
                </div>
            </div>
        </section>

        <!-- 赞助商区域 -->
        <section class="sponsors">
            <div class="container">
                <h2 class="section-title">感谢我们的赞助商</h2>
                <div class="sponsor-tiers">
                    <div class="sponsor-tier">
                        <h3>白金赞助商</h3>
                        <div class="sponsor-cards">
                            <div class="sponsor-card placeholder">
                                <span>成为赞助商</span>
                            </div>
                        </div>
                    </div>
                    <div class="sponsor-tier">
                        <h3>黄金赞助商</h3>
                        <div class="sponsor-cards">
                            <div class="sponsor-card placeholder">
                                <span>成为赞助商</span>
                            </div>
                            <div class="sponsor-card placeholder">
                                <span>成为赞助商</span>
                            </div>
                            <div class="sponsor-card placeholder">
                                <span>成为赞助商</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- 页脚 -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>TORM</h4>
                    <p>Go语言的优雅ORM库</p>
                </div>
                <div class="footer-section">
                    <h4>文档</h4>
                    <a href="docs.html?doc=quick-start">快速开始</a>
                    <a href="docs.html?doc=configuration">配置指南</a>
                    <a href="#">API参考</a>
                </div>
                <div class="footer-section">
                    <h4>社区</h4>
                    <a href="https://github.com/zhoudm1743/torm" target="_blank">GitHub</a>
                    <a href="#">讨论区</a>
                    <a href="docs.html?doc=contributing">贡献指南</a>
                </div>
                <div class="footer-section">
                    <h4>其他</h4>
                    <a href="docs.html?doc=changelog">更新日志</a>
                    <a href="https://github.com/zhoudm1743/torm/issues" target="_blank">问题反馈</a>
                    <a href="docs.html?doc=troubleshooting">故障排除</a>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 TORM. <a href="https://beian.miit.gov.cn/" style="color: #fff;text-decoration: none;">浙ICP备19007147号-3</a></p>
            </div>
        </div>
    </footer>

    <script src="scripts/config.js"></script>
    <script src="scripts/main.js"></script>
</body>
</html> 