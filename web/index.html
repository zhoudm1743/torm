<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TORM - Goè¯­è¨€çš„ä¼˜é›…ORMåº“</title>
    <link rel="icon" href="assets/logo.svg" type="image/x-icon">
    <link rel="stylesheet" href="styles/main.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- å¯¼èˆªæ  -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <img src="assets/logo.svg" alt="TORM" class="logo">
                <span class="brand-text">TORM</span>
            </div>
            <div class="nav-menu" id="nav-menu">
                <a href="docs.html" class="nav-link">æ–‡æ¡£</a>
                <a href="docs.html?doc=examples" class="nav-link">ç¤ºä¾‹</a>
                <a href="#" class="nav-link">ç¤¾åŒº</a>
                <a href="#" class="nav-link">API</a>
                <a href="docs.html?doc=contributing" class="nav-link">è´¡çŒ®</a>
                <div class="language-selector">
                    <select id="language-select">
                        <option value="zh">ç®€ä½“ä¸­æ–‡</option>
                        <option value="en">English</option>
                    </select>
                </div>
            </div>
            <div class="nav-toggle" id="nav-toggle">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <!-- ä¸»é¡µå†…å®¹ -->
    <main class="main-content">
        <!-- è‹±é›„åŒºåŸŸ -->
        <section class="hero">
            <div class="hero-background"></div>
            <div class="container">
                <div class="hero-content">
                    <h1 class="hero-title">
                        <span class="hero-title-main">TORM</span>
                        <span class="hero-title-sub">Goè¯­è¨€çš„ä¼˜é›…ORMåº“</span>
                    </h1>
                    <div class="hero-install">
                        <code class="install-command">go get -u github.com/zhoudm1743/torm</code>
                        <button class="copy-btn" id="copy-install-btn">å¤åˆ¶</button>
                    </div>
                    <div class="hero-stats">
                        <div class="stat-item">
                            <span class="stat-icon">â­</span>
                            <span class="stat-text">GitHub stars</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-icon">ğŸ´</span>
                            <span class="stat-text">GitHub forks</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-icon">ğŸ‘¥</span>
                            <span class="stat-text">è´¡çŒ®è€…</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ç‰¹æ€§å±•ç¤º -->
        <section class="features">
            <div class="container">
                <h2 class="section-title">ä¸ºä»€ä¹ˆé€‰æ‹©TORM</h2>
                <div class="features-grid">
                    <div class="feature-card">
                        <div class="feature-icon">âš¡</div>
                        <h3>é›¶é…ç½®å¯åŠ¨</h3>
                        <p>ä¸€è¡Œä»£ç å®Œæˆæ•°æ®åº“è¿æ¥å’Œè¡¨åˆ›å»ºï¼Œæ— éœ€å¤æ‚é…ç½®</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">ğŸ·ï¸</div>
                        <h3>ä¸°å¯ŒTORMæ ‡ç­¾</h3>
                        <p>30+ç§æ ‡ç­¾è¦†ç›–æ‰€æœ‰æ•°æ®åº“ç‰¹æ€§ï¼Œç²¾ç¡®æ§åˆ¶è¡¨ç»“æ„</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">ğŸ”„</div>
                        <h3>æ™ºèƒ½è‡ªåŠ¨è¿ç§»</h3>
                        <p>è‡ªåŠ¨æ£€æµ‹æ¨¡å‹å˜æ›´ï¼Œå®‰å…¨æ›´æ–°è¡¨ç»“æ„ï¼Œä¿æŠ¤ç°æœ‰æ•°æ®</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">ğŸŒ</div>
                        <h3>è·¨æ•°æ®åº“å…¼å®¹</h3>
                        <p>MySQLã€PostgreSQLã€SQLiteæ— ç¼åˆ‡æ¢ï¼Œä¸€å¥—ä»£ç å¤šç¯å¢ƒ</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">ğŸ”—</div>
                        <h3>å¼ºå¤§æŸ¥è¯¢æ„å»ºå™¨</h3>
                        <p>å‚æ•°åŒ–æŸ¥è¯¢ã€æ•°ç»„å‚æ•°ã€è‡ªåŠ¨å ä½ç¬¦é€‚é…</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">ğŸ’¼</div>
                        <h3>è‡ªåŠ¨äº‹åŠ¡ç®¡ç†</h3>
                        <p>ç®€æ´çš„äº‹åŠ¡APIï¼Œè‡ªåŠ¨æäº¤å›æ»šï¼Œç¡®ä¿æ•°æ®ä¸€è‡´æ€§</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">ğŸš€</div>
                        <h3>é«˜æ€§èƒ½ä¼˜åŒ–</h3>
                        <p>é›¶åå°„æŸ¥è¯¢ã€è¿æ¥æ± ä¼˜åŒ–ã€æ‰¹é‡æ“ä½œåŸç”Ÿæ”¯æŒ</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">ğŸ¯</div>
                        <h3>ç”Ÿäº§å°±ç»ª</h3>
                        <p>å®Œæ•´æµ‹è¯•è¦†ç›–ã€è¯¦ç»†æ–‡æ¡£ã€ä¸°å¯Œç¤ºä¾‹</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- ä»£ç ç¤ºä¾‹ -->
        <section class="code-demo">
            <div class="container">
                <h2 class="section-title">å¿«é€Ÿä¸Šæ‰‹</h2>
                <div class="demo-tabs">
                    <button class="tab-btn active" data-tab="basic">å¿«é€Ÿå¯åŠ¨</button>
                    <button class="tab-btn" data-tab="model">TORMæ ‡ç­¾</button>
                    <button class="tab-btn" data-tab="migration">è‡ªåŠ¨è¿ç§»</button>
                    <button class="tab-btn" data-tab="transaction">æŸ¥è¯¢æ“ä½œ</button>
                </div>
                <div class="demo-content">
                    <div class="tab-content active" id="basic">
                        <pre><code class="language-go">package main

import (
    "time"
    "github.com/zhoudm1743/torm"
)

// ç”¨æˆ·æ¨¡å‹ 
type User struct {
    torm.BaseModel
    ID        int       `json:"id" torm:"primary_key,auto_increment"`
    Username  string    `json:"username" torm:"type:varchar,size:50,unique"`
    Email     string    `json:"email" torm:"type:varchar,size:100,unique"`
    Age       int       `json:"age" torm:"type:int,default:0"`
    Status    string    `json:"status" torm:"type:varchar,size:20,default:active"`
    CreatedAt time.Time `json:"created_at" torm:"auto_create_time"`
    UpdatedAt time.Time `json:"updated_at" torm:"auto_update_time"`
}

func main() {
    // ğŸš€ TORM 

    // ç¬¬1æ­¥ï¼šé…ç½®æ•°æ®åº“ï¼ˆæ”¯æŒMySQLã€PostgreSQLã€SQLiteï¼‰
    torm.AddConnection("default", &torm.Config{
        Driver:   "mysql",
        Host:     "localhost",
        Port:     3306,
        Database: "myapp",
        Username: "root",
        Password: "password",
    })

    // ç¬¬2æ­¥ï¼šåˆ›å»ºè¡¨ç»“æ„
    user := &User{}
    user.AutoMigrate() 
    
    // ç¬¬3æ­¥ï¼šå¼€å§‹ä½¿ç”¨
    // åˆ›å»ºç”¨æˆ·
    newUser := &User{
        Username: "zhangsan",
        Email:    "zhangsan@example.com",
        Age:      25,
        Status:   "active",
    }
    newUser.Save()
    
    // æŸ¥è¯¢ç”¨æˆ·
    users, _ := torm.Table("users").
        Where("status", "=", "active").
        Where("age", ">=", 18).
        Get()
    
    // å®Œæˆï¼æ— éœ€å¤æ‚é…ç½®ï¼Œç«‹å³å¯ç”¨
    fmt.Printf("åˆ›å»ºäº† %d ä¸ªç”¨æˆ·", len(users))
}</code></pre>
                    </div>
                    <div class="tab-content" id="model">
                        <pre><code class="language-go">// ğŸ·ï¸ TORMæ ‡ç­¾ç³»ç»Ÿ - 30+ç§æ ‡ç­¾ç²¾ç¡®æ§åˆ¶è¡¨ç»“æ„

type Product struct {
    torm.BaseModel
    
    // ä¸»é”®å’Œè‡ªå¢
    ID int64 `torm:"primary_key,auto_increment,comment:äº§å“ID"`
    
    // å­—ç¬¦ä¸²ç±»å‹å’Œé•¿åº¦æ§åˆ¶
    Name     string `torm:"type:varchar,size:200,comment:äº§å“åç§°"`
    SKU      string `torm:"type:varchar,size:50,unique,comment:äº§å“ç¼–ç "`
    Category string `torm:"type:varchar,size:20,default:normal,index"`
    
    // æ•°å€¼ç±»å‹å’Œç²¾åº¦æ§åˆ¶
    Price  float64 `torm:"type:decimal,precision:10,scale:2,comment:ä»·æ ¼"`
    Stock  int     `torm:"type:int,unsigned,default:0,comment:åº“å­˜"`
    Weight float64 `torm:"type:decimal,precision:8,scale:3,comment:é‡é‡"`
    
    // å¸ƒå°”å’Œé»˜è®¤å€¼
    IsActive bool `torm:"type:boolean,default:1,comment:æ˜¯å¦å¯ç”¨"`
    IsNew    bool `torm:"type:boolean,default:0,comment:æ˜¯å¦æ–°å“"`
    
    // æ–‡æœ¬ç±»å‹
    Description string `torm:"type:text,comment:äº§å“æè¿°"`
    Features    string `torm:"type:longtext,comment:äº§å“ç‰¹æ€§"`
    
    // äºŒè¿›åˆ¶å’ŒJSONç±»å‹
    Image    []byte                 `torm:"type:blob,comment:äº§å“å›¾ç‰‡"`
    Settings map[string]interface{} `torm:"type:json,comment:è®¾ç½®ä¿¡æ¯"`
    Tags     []string               `torm:"type:json,comment:æ ‡ç­¾åˆ—è¡¨"`
    
    // ç´¢å¼•ç±»å‹
    SearchKey string `torm:"type:varchar,size:200,fulltext,comment:æœç´¢å…³é”®è¯"`
    Location  string `torm:"type:varchar,size:100,spatial,comment:åœ°ç†ä½ç½®"`
    
    // å¤–é”®å’Œå…³è”
    CategoryID int `torm:"type:int,references:categories.id,on_delete:cascade"`
    BrandID    int `torm:"type:int,references:brands.id,on_delete:set_null"`
    
    // è‡ªåŠ¨æ—¶é—´æˆ³
    CreatedAt time.Time `torm:"auto_create_time,comment:åˆ›å»ºæ—¶é—´"`
    UpdatedAt time.Time `torm:"auto_update_time,comment:æ›´æ–°æ—¶é—´"`
}

// ä¸€è¡Œä»£ç åˆ›å»ºå¤æ‚è¡¨ç»“æ„
func main() {
    // è‡ªåŠ¨åˆ›å»ºè¡¨ã€ç´¢å¼•ã€å¤–é”®ã€çº¦æŸ
    product := &Product{}
    product.AutoMigrate()
    
    // ç”Ÿæˆçš„MySQL DDLç¤ºä¾‹ï¼š
    // CREATE TABLE products (
    //   id BIGINT AUTO_INCREMENT PRIMARY KEY COMMENT 'äº§å“ID',
    //   name VARCHAR(200) COMMENT 'äº§å“åç§°',
    //   sku VARCHAR(50) UNIQUE COMMENT 'äº§å“ç¼–ç ',
    //   price DECIMAL(10,2) COMMENT 'ä»·æ ¼',
    //   stock INT UNSIGNED DEFAULT 0 COMMENT 'åº“å­˜',
    //   is_active BOOLEAN DEFAULT 1 COMMENT 'æ˜¯å¦å¯ç”¨',
    //   settings JSON COMMENT 'è®¾ç½®ä¿¡æ¯',
    //   created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    //   ...
    //   INDEX idx_category (category),
    //   FULLTEXT idx_search_key (search_key),
    //   FOREIGN KEY (category_id) REFERENCES categories(id) ON DELETE CASCADE
    // );
}</code></pre>
                    </div>
                    <div class="tab-content" id="migration">
                        <pre><code class="language-go">// è‡ªåŠ¨è¿ç§»

// ç¬¬ä¸€æ¬¡è¿è¡Œï¼šåˆ›å»ºåŸºç¡€è¡¨ç»“æ„
type User struct {
    torm.BaseModel
    ID   int    `torm:"primary_key,auto_increment"`
    Name string `torm:"type:varchar,size:50"`
}

func firstDeploy() {
    user := &User{}
    user.AutoMigrate()
    // SQL: CREATE TABLE users (id INT AUTO_INCREMENT PRIMARY KEY, name VARCHAR(50))
}

// ç¬¬äºŒæ¬¡è¿è¡Œï¼šæ·»åŠ æ–°å­—æ®µ
type User struct {
    torm.BaseModel
    ID    int    `torm:"primary_key,auto_increment"`
    Name  string `torm:"type:varchar,size:50"`
    Email string `torm:"type:varchar,size:100,unique"` // æ–°å¢å­—æ®µ
    Age   int    `torm:"type:int,default:0"`           // æ–°å¢å­—æ®µ
}

func secondDeploy() {
    user := &User{}
    user.AutoMigrate()
    // æ™ºèƒ½æ£€æµ‹å·®å¼‚ï¼Œåªæ‰§è¡Œå¿…è¦çš„å˜æ›´ï¼š
    // SQL: ALTER TABLE users ADD COLUMN email VARCHAR(100) UNIQUE
    // SQL: ALTER TABLE users ADD COLUMN age INT DEFAULT 0
}

// ç¬¬ä¸‰æ¬¡è¿è¡Œï¼šä¿®æ”¹å­—æ®µå±æ€§
type User struct {
    torm.BaseModel
    ID    int    `torm:"primary_key,auto_increment"`
    Name  string `torm:"type:varchar,size:100"`        // é•¿åº¦ä»50æ”¹ä¸º100
    Email string `torm:"type:varchar,size:100,unique"`
    Age   int    `torm:"type:int,default:0"`
}

func thirdDeploy() {
    user := &User{}
    user.AutoMigrate()
    // æ™ºèƒ½æ£€æµ‹å­—æ®µå˜æ›´ï¼š
    // SQL: ALTER TABLE users MODIFY COLUMN name VARCHAR(100)
}

// è·¨æ•°æ®åº“è‡ªåŠ¨é€‚é…
func crossDatabase() {
    // åŒä¸€æ¨¡å‹å®šä¹‰ï¼Œè‡ªåŠ¨é€‚é…ä¸åŒæ•°æ®åº“
    user := &User{}
    
    // MySQLç¯å¢ƒ
    user.SetConnection("mysql")
    user.AutoMigrate() // ç”ŸæˆMySQLä¼˜åŒ–çš„DDL
    
    // PostgreSQLç¯å¢ƒ  
    user.SetConnection("postgres")
    user.AutoMigrate() // ç”ŸæˆPostgreSQLä¼˜åŒ–çš„DDL
    
    // SQLiteç¯å¢ƒ
    user.SetConnection("sqlite")  
    user.AutoMigrate() // ç”ŸæˆSQLiteå…¼å®¹çš„DDL
}</code></pre>
                    </div>
                    <div class="tab-content" id="transaction">
                        <pre><code class="language-go">// ğŸ”— æŸ¥è¯¢æ„å»ºå™¨

func main() {
    // åŸºç¡€æŸ¥è¯¢ - é“¾å¼è°ƒç”¨
    users, _ := torm.Table("users").
        Where("status", "=", "active").
        Where("age", ">=", 18).
        OrderBy("created_at", "desc").
        Limit(10).
        Get()

    // å‚æ•°åŒ–æŸ¥è¯¢ 
    user, _ := torm.Table("users").
        Where("username = ? AND age >= ?", "zhangsan", 25).
        First()

    // æ•°ç»„å‚æ•°æ”¯æŒ
    activeUsers, _ := torm.Table("users").
        Where("status IN (?)", []string{"active", "premium", "vip"}).
        Where("age BETWEEN ? AND ?", 18, 65).
        Get()

    // å¤æ‚æ¡ä»¶ç»„åˆ
    complexResults, _ := torm.Table("users").
        Where("(status = ? OR vip_level > ?) AND age >= ?", "premium", 3, 25).
        WhereIn("department", []string{"tech", "product", "design"}).
        Get()

    // èšåˆå’Œåˆ†é¡µ
    count, _ := torm.Table("users").Where("status", "=", "active").Count()
    
    pagination, _ := torm.Table("users").
        Where("status", "=", "active").
        Paginate(1, 20) // ç¬¬1é¡µï¼Œæ¯é¡µ20æ¡

    // äº‹åŠ¡å¤„ç† - è‡ªåŠ¨ç®¡ç†
    err := torm.Transaction(func(tx torm.TransactionInterface) error {
        // åœ¨äº‹åŠ¡ä¸­æ‰§è¡Œå¤šä¸ªæ“ä½œ
        _, err := tx.Exec("INSERT INTO orders (user_id, amount) VALUES (?, ?)", 
                         123, 99.99)
        if err != nil {
            return err // è‡ªåŠ¨å›æ»š
        }
        
        _, err = tx.Exec("UPDATE users SET balance = balance - ? WHERE id = ?", 
                        99.99, 123)
        if err != nil {
            return err // è‡ªåŠ¨å›æ»š
        }

        return nil // è‡ªåŠ¨æäº¤
    })

    // è·¨æ•°æ®åº“å ä½ç¬¦è‡ªåŠ¨é€‚é…
    // MySQL: SELECT * FROM users WHERE status = ? AND age >= ?
    // PostgreSQL: SELECT * FROM users WHERE status = $1 AND age >= $2
    // SQLite: SELECT * FROM users WHERE status = ? AND age >= ?
}</code></pre>
                    </div>
                </div>
            </div>
        </section>

        <!-- èµåŠ©å•†åŒºåŸŸ -->
        <section class="sponsors">
            <div class="container">
                <h2 class="section-title">æ„Ÿè°¢æˆ‘ä»¬çš„èµåŠ©å•†</h2>
                <div class="sponsor-tiers">
                    <div class="sponsor-tier">
                        <h3>ç™½é‡‘èµåŠ©å•†</h3>
                        <div class="sponsor-cards">
                            <div class="sponsor-card placeholder">
                                <span>æˆä¸ºèµåŠ©å•†</span>
                            </div>
                        </div>
                    </div>
                    <div class="sponsor-tier">
                        <h3>é»„é‡‘èµåŠ©å•†</h3>
                        <div class="sponsor-cards">
                            <div class="sponsor-card placeholder">
                                <span>æˆä¸ºèµåŠ©å•†</span>
                            </div>
                            <div class="sponsor-card placeholder">
                                <span>æˆä¸ºèµåŠ©å•†</span>
                            </div>
                            <div class="sponsor-card placeholder">
                                <span>æˆä¸ºèµåŠ©å•†</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- é¡µè„š -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>TORM</h4>
                    <p>Goè¯­è¨€çš„ä¼˜é›…ORMåº“</p>
                </div>
                <div class="footer-section">
                    <h4>æ–‡æ¡£</h4>
                    <a href="docs.html?doc=quick-start">å¿«é€Ÿå¼€å§‹</a>
                    <a href="docs.html?doc=configuration">é…ç½®æŒ‡å—</a>
                    <a href="#">APIå‚è€ƒ</a>
                </div>
                <div class="footer-section">
                    <h4>ç¤¾åŒº</h4>
                    <a href="https://github.com/zhoudm1743/torm" target="_blank">GitHub</a>
                    <a href="#">è®¨è®ºåŒº</a>
                    <a href="docs.html?doc=contributing">è´¡çŒ®æŒ‡å—</a>
                </div>
                <div class="footer-section">
                    <h4>å…¶ä»–</h4>
                    <a href="docs.html?doc=changelog">æ›´æ–°æ—¥å¿—</a>
                    <a href="https://github.com/zhoudm1743/torm/issues" target="_blank">é—®é¢˜åé¦ˆ</a>
                    <a href="docs.html?doc=troubleshooting">æ•…éšœæ’é™¤</a>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 TORM. <a href="https://beian.miit.gov.cn/" style="color: #fff;text-decoration: none;">æµ™ICPå¤‡19007147å·-3</a></p>
            </div>
        </div>
    </footer>

    <script src="scripts/config.js"></script>
    <script src="scripts/main.js"></script>
</body>
</html> 